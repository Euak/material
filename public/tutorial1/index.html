<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="pt-br">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Básico da Linguagem e Data Frame - R Sociais</title>
    <meta name="generator" content="Hugo 0.22" />

    
    <meta name="description" content="Material do Curso de Programação para Ciências Sociais">
    
    <link rel="canonical" href="../tutorial1/">
    
    <meta name="author" content="Curso de Programação para Ciências Sociais">
    

    <meta property="og:url" content="/tutorial1/">
    <meta property="og:title" content="R Sociais">
    <meta property="og:image" content="/logo_r4sc.jpg">
    <meta name="apple-mobile-web-app-title" content="R Sociais">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('/fonts/icon.eot');
        src: url('/fonts/icon.eot')
               format('embedded-opentype'),
             url('/fonts/icon.woff')
               format('woff'),
             url('/fonts/icon.ttf')
               format('truetype'),
             url('/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="../stylesheets/application.css">
    <link rel="stylesheet" href="../stylesheets/temporary.css">
    <link rel="stylesheet" href="../stylesheets/palettes.css">
    <link rel="stylesheet" href="../stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="../javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Básico da Linguagem e Data Frame
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/R4CS" title="@R4CS on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/R4CS/site" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../logo_r4sc.jpg">
        </div>
      
      <div class="name">
        <strong>R Sociais </strong>
        
          <br>
          R4CS/site
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/R4CS/site/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/R4CS/site/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a class="current" title="Tutorial 1" href="../tutorial1/">
	
	Tutorial 1
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="Tutorial 2" href="../tutorial2/">
	
	Tutorial 2
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 3" href="../tutorial3/">
	
	Tutorial 3
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 4" href="../tutorial4/">
	
	Tutorial 4
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 5" href="../tutorial5/">
	
	Tutorial 5
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 6" href="../tutorial6/">
	
	Tutorial 6
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 7" href="../tutorial7/">
	
	Tutorial 7
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 8" href="../tutorial8/">
	
	Tutorial 8
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 9" href="../tutorial9/">
	
	Tutorial 9
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 10" href="../tutorial10/">
	
	Tutorial 10
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 11" href="../tutorial11/">
	
	Tutorial 11
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 12" href="../tutorial12/">
	
	Tutorial 12
</a>



  
</li>



<li>
  
    



<a  title="Tutorial 13" href="../tutorial13/">
	
	Tutorial 13
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/R4CS" target="_blank" title="@R4CS on GitHub">
              @R4CS on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:programacao.sociais@gmail.com" title="Email of programacao.sociais@gmail.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Básico da Linguagem e Data Frame </h1>

			

<h1 id="começando-pelo-meio-data-frames">Começando pelo meio: data frames</h1>

<p>Uma característica distintiva da linguagem de programação R é ter sido desenvolvida para a análise de dados. E quando pensamos em análise de dados, a protagonista do show é a <em>base de dados</em> ou, como vamos conhecer a partir de agora, <strong>data frame</strong>.</p>

<p>Por esta razão, em vez de aprender como fazer aritmética, elaborar funções ou executar loops para repetir tarefas e outros aspectos básicos da linguagem, vamos começar olhando para o R como um software concorrente dos demais utilizados para análise de dados em ciências sociais, como SPSS, Stata, SAS e companhia.</p>

<p>As principais características de um data frame são: (1) cada coluna representa uma variável (ou característica) de um conjunto de observações; (2) cada linha representa uma observação e contém os valores de cada variável para tal observação. Vejamos um exemplo:</p>

<p>| Candidato | Partido  | Votos |
| &mdash;&mdash;&mdash; |&mdash;&mdash;&mdash;-| &mdash;&mdash;|
| Beatriz   | PMDB     |   350 |
| Danilo    | PSOL     |  1598 |
| Pedro     | PTB      |   784 |
| Davi      | PSD      |   580 |
| Mateus    | PV       |   2   |</p>

<p>Note que em uma linha os elementos são de tipos de diferentes: na primeira coluna há uma nome (texto), na segunda uma sigla de partido (texto, mas limitado a um conjunto de siglas) e na terceira votos (número inteiros).</p>

<p>Por outro lado, em cada coluna há somente elementos de um tipo. Por exemplo, há apenas números inteiros na coluna votos. Colunas são variáveis e por isso aceitam registros de um único tipo. Se você já fez um curso de estatísticas básica ou de métodos quantitativos deve se lembrar que as variáveis são classificadas da seguinte maneira:</p>

<p>1- Discretas</p>

<ul>
<li><p>Nominais, que são categorias (normalmente texto) não ordenadas;</p></li>

<li><p>Ordinais, que são categorias (normalmente texto) ordenadas;</p></li>

<li><p>Inteiros, ou seja, o conjunto dos números inteiros.</p></li>
</ul>

<p>2- Contínuas, números que podem assumir valores não inteiros</p>

<p>Se destacamos uma coluna do nosso data frame, temos um <strong>vetor</strong>. Por exemplo, a variável &ldquo;Votos&rdquo; pode ser presentado da seguinte maneira: {350, 1598, 784, 580, 2}. Um data frame é um conjunto de variáveis (vetores) dispostos na vertical e combinados um ao lado do outro.</p>

<p>Data frame e vetores são <strong>objetos</strong> na linguagem R.</p>

<p>Vamos ver como o R representa vetores e data frames na tela. Antes disso, é preciso &ldquo;abrir&rdquo; um data frame.</p>

<h2 id="pausa-para-pacotes">Pausa para pacotes</h2>

<p>Uma das características mais atrativas da linguagem R é o desenvolvimento de <strong>pacotes</strong> pela comunidade de usuários. Pacotes são conjuntos de funções (aka comandos) e, por vezes, guardam também dados em diversos formatos.</p>

<p>Vamos carregar um pacote chamado <em>datasets</em>, que contém diversos conjuntos de dados úteis para fins didáticos. Para carregar um pacote (e, portanto, tornar as funções disponíveis para uso naquela sessão de R) usamos a função <em>library</em>:</p>

<pre><code class="language-r">library(datasets)
</code></pre>

<h2 id="de-volta-aos-dataframes">De volta aos dataframes</h2>

<p>Com a função <em>data</em> podemos carregar um conjunto de dados disponível na sua sessão de R. Utilizaremos a base <em>mtcars</em>, que contém dados da revista <em>Motor Trend US</em> sobre características (variáveis) de 32 automóveis (esse é um dos conjuntos de dados mais populares em cursos introdutórios de R).</p>

<pre><code class="language-r">data(mtcars)
</code></pre>

<p>Pronto! Logo mais veremos como abrir conjuntos de dados de outras fontes (arquivos de texto, outros softwares, etc), mas já podemos começar a trabalhar com <em>data frames</em>.</p>

<p>Antes de avançar, vamos usar o <strong>help</strong> (documentação) do R para descobrir o que há no <em>data frame</em> chamado <em>mtcars</em>:</p>

<pre><code class="language-r">?mtcars
</code></pre>

<p>Você pode ler com calma antes de avançar.</p>

<p>Se quiseremos olhar para os dados que acabamos de carregar utilizamos a função <em>View</em> (com V maiúsculo, algo pouco usual em R):</p>

<pre><code class="language-r">View(mtcars)
</code></pre>

<p>Com apenas 32 observações, não fica tão difícil &ldquo;olhar&rdquo; para os dados. Mas e se estívessemos trabalhando com, por exemplo, o total de candidatos vereadores no Brasil em 2016 (aprox. meio milhão de candidatos)? Seria útil utilizar o comando <em>View</em>?</p>

<h2 id="do-editor-de-planilhas-ao-r-parte-1">Do editor de planilhas ao R - parte 1</h2>

<p>A partir desse ponto no curso vamos resistir à tentação de &ldquo;olhar&rdquo; para os dados. O hábito de quem utiliza com editores de planilha como MS Excel ou Libre Office Calc, ou ainda com algums softwares de análise de dados como SPSS e Minitab, é trabalhar &ldquo;olhando&rdquo; para os dados, ou seja, para os valores de cada célula de uma base dados.</p>

<p>Você perceberá em pouco tempo que isso não é necessário. Na verdade, é contraproducente. Nas primeiras aulas vamos nos munir de ferramentas que nos permitirão conhecer os dados sem olhá-los diretamente.</p>

<h2 id="head-no-lugar-de-view">Head no lugar de View</h2>

<p>Por exemplo, podemos substituir a função <em>View</em> pela função <em>head</em>. Veja o resultado:</p>

<pre><code class="language-r">head(mtcars)
</code></pre>

<p>Com apenas as 6 primeiras linhas do <em>data frame</em> temos noção de todo o conjunto. Sabemos rapidamente que os nomes dos carros são o nome de cada uma das linhas, e que o nome das colunas indicam qual característica está armazenada coluna (lembra-se da documentação de <em>mtcars</em> que você acabou de ler).</p>

<p>Alternativamente, podemos usar a função <em>str</em> (atalho para &ldquo;structure&rdquo;):</p>

<pre><code class="language-r">str(mtcars)
</code></pre>

<p>Com <em>str</em> sabemos qual é a lista de variáveis (colunas) no <em>data frame</em>, de qual tipo são &ndash; no caso, todas são numéricas e vamos falar sobre esse tema mais tarde &ndash; e os primeiros valores de cada uma, além do número total de observações e variáveis mostrados no topo do <strong>output</strong>.</p>

<p>Há outras maneiras de obter o número linhas e colunas de um <em>data frame</em>:</p>

<pre><code class="language-r">nrow(mtcars)
ncol(mtcars)
dim(mtcars)
</code></pre>

<p><em>nrow</em> retorna o número de linhas; <em>ncol</em>, o de coluna; <em>dim</em> as dimensões (na ordem linha e depois coluna) do objeto.</p>

<p><em>names</em>, por sua vez, retorna os nomes das variáveis do <em>data frame</em></p>

<pre><code class="language-r">names(mtcars)
</code></pre>

<h2 id="argumentos-ou-parâmetros-das-funções">Argumentos ou parâmetros das funções</h2>

<p>Note que em todas as funções que utilizamos até agora, <em>mtcars</em> está dentro do parêntesis que segue o nome da função. Essa <strong>sintax</strong> é característica das funções de R. O que vai entre parêntesis são os <strong>argumentos</strong> ou <strong>parâmetros</strong> da função, ou seja, os &ldquo;inputs&rdquo; que serão transformados.</p>

<p>Uma função pode receber mais de um argumento. Pode também ter argumentos não obrigatórios, ou seja, para os quais não é necessário informar nada se você não quiser alterar os valores pré-definidos. Por exemplo, a função <em>head</em> contém o argumento <em>n</em>, que se refere ao número de linhas a serem <strong>impressas</strong> na tela, pré-estabelecido em 6 (você pode conhecer os argumentos da função na documentação do R usando <em>?</em> antes do nome da função). Para alterá-lo para 10, por exemplo, basta fazer:</p>

<pre><code class="language-r">head(x = mtcars, n = 10)
</code></pre>

<p><em>x</em> é o argumento que já havíamos utilizado anteriormente e indica em que objeto a função <em>head</em> será aplicada. Dica: você pode omitir tanto &ldquo;x =&rdquo; quanto &ldquo;n =&rdquo; se você já conhecer a ordem de cada argumento no uso da função. Veja que neste caso estamos utilizando o símbolo &ldquo;=&rdquo; sem fazer a atribuição de dados a um objeto, mas para atribuir valores (ou objetos) aos argumento de uma função. Para não haver confusão é preferível usar o símbolo &ldquo;&lt;-&rdquo; para atribuição e o &ldquo;=&rdquo; para as demais situações.</p>

<h2 id="pausa-para-um-comentário">Pausa para um comentário</h2>

<p>Podemos fazer comentários no meio do código. Basta usar # e tudo que seguir até o final da linha não será interpertado pelo R como código. Por exemplo:</p>

<pre><code class="language-r"># Imprime o nome das variaveis do data frame mtcars
names(mtcars)

names(mtcars) # Repetindo o comando acima com comentario em outro lugar
</code></pre>

<p>Comentários são extremamente úteis para documentar seu código. Documentar é parte de programar e você deve pensar nas pessoas com as quais vai compartilhar o código e no fato de que com certeza não se lembrará do que fez em pouco tempo (garanto, você vai esquecer).</p>

<h2 id="construindo-vetores-e-data-frames">Construindo vetores e data frames</h2>

<p>Vamos esquecer o <em>data frame</em> com o qual estávamos trabalhando até agora. Para remover um objeto do <strong>Workspace</strong> fazemos:</p>

<pre><code class="language-r">rm(mtcars)
</code></pre>

<p>Vamos fazer isso de forma menos entediante. Vamos montar um banco de dados de notícias.</p>

<p>Escolha 2 jornais ou portais de notícias diferentes. Vá em cada um deles e colete 3 notícias. Em casa notícia, colete as seguintes informações:</p>

<ul>
<li>Nome do jornal ou portal</li>
<li>Data da notícia (não precisa coletar a hora)</li>
<li>Título</li>
<li>Autor(a)</li>
<li>Número de palavras no texto (use o MS Word ou Libre Office se precisar - chute se tiver preguiça)</li>
<li>Marque 1 se a notícia for sobre política e 0 caso contrário</li>
<li>Marque 1 se a notícia for sobre esporte e 0 caso contrário</li>
<li>Marque TRUE se a notícia contiver vídeo e FALSE caso contrário</li>
</ul>

<p>Insira as informações nos vetores em ordem de coleta das notícias</p>

<p>Com cada informação, vamos construir um vetor. Vejam meus exemplos. Começando com o nome do jornal ou portal:</p>

<pre><code class="language-r">jornal &lt;- c(&quot;The Guardian&quot;, &quot;The Guardian&quot;, &quot;The Guardian&quot;, &quot;Folha de São Paulo&quot;, 
            &quot;Folha de São Paulo&quot;, &quot;Folha de São Paulo&quot;) 

</code></pre>

<p>Opa, calma! Temos um monte de coisas novas aqui!</p>

<p>A primeira delas é: se você criou corretamente o vetor <em>jornal</em>, então nada aconteceu na sua tela, ou seja, nenhum <em>output</em> foi impresso. Isso se deve ao fato de que criamos um novo <strong>objeto</strong>, chamado <em>jornal</em> e <strong>atribuímos</strong> a ele os valores coletados sobre os nomes dos veículos nos quais coletamos as notícias. O símbolo de <strong>atribuição</strong> em R é <code>&lt;-</code>. Note que o símbolo lembra uma seta para a esquerda, indicando que o conteúdo do vetor será armazenado no objeto <em>jornal</em>.</p>

<p>Objetos não são nada mais do que um nome usado para armazenar dados na memória RAM (temporária) do seu computador. No exemplo acima, <em>jornal</em> é o objeto e o vetor é a informação armazenada. Uma vez criado, o objeto está disponível para ser usado novamente, pois ele ficará disponível no <strong>workspace</strong>. Veremos adiante que podemos criar um <em>data frame</em> a partir de vários vetores armazenados na memória. Especificamente no RStudio, os objetos ficam disponíveis no painel <em>environment</em> (que provavelmente está no canto direito superior da sua tela).</p>

<p>Posso usar o símbolo <strong>=</strong> no lugar de <strong>&lt;-</strong>? Sim. Funciona. Mas nem sempre funciona e esta substituição é uma fonte grande de confusão. Quando entendermos um pouco mais da sintaxe da linguagem R ficará claro.</p>

<p>Se o objetivo fosse criar o vetor sem &ldquo;guardá-lo&rdquo; em um objeto, bastaria repetir a parte do código acima que começa após o símbolo de atribuição. <em>c</em> ( do inglês &ldquo;concatenate&rdquo;) é a função do R que combina valores de texto, número ou lógicos (ainda não falamos destes últimos) em um vetor. É um função muito utilizada ao programar em R.</p>

<pre><code class="language-r">c(&quot;The Guardian&quot;, &quot;The Guardian&quot;, &quot;The Guardian&quot;, &quot;Folha de São Paulo&quot;,
  &quot;Folha de São Paulo&quot;, &quot;Folha de São Paulo&quot;)
</code></pre>

<p>Note que há uma quebra de linha no código. Não há problema algum. Uma vez que o parêntese que indica o fim do vetor não foi encontrado, o R entende o que estiver na próxima como continuidade do código (e, portanto, do vetor). Dica: quebras de linha ajudam a vizualizar o código e com o tempo você também usará.</p>

<p>Vamos seguir com nossa tarefa de criar vetores. Já temos o vetor jornal (que você pode observar no workspace). Os demais, na minha coleta de dados, estão a seguir:</p>

<pre><code class="language-r"># Data
# Obs: ha uma funcao em R com nome &quot;data&quot;.
# Evite dar a objetos nome de funcoes
date &lt;- c(&quot;10/03/2017&quot;, &quot;10/03/2017&quot;, &quot;10/03/2017&quot;, &quot;10/03/2017&quot;, &quot;10/03/2017&quot;, &quot;10/03/2017&quot;)

# Titulo
titulo &lt;- c(&quot;'Trump lies all the time': Bernie Sanders indicts president's assault on democracy&quot;,
            &quot;Bruno, still guilty of murder but bafflingly welcome to walk back into football&quot;,
            &quot;BBC interviewee interrupted by his children live on air – video&quot;,
            &quot;Bolsista negra é hostilizada em atividade no campus da FGV de SP&quot;,
            &quot;Meninas podem ser o que quiserem, inclusive matemáticas&quot;,
            &quot;Favela de Paraisópolis tem novo incêndio em menos de dez dias&quot;)

# Autor
autor &lt;- c(&quot;Ed Pilkington &quot;, &quot;Barney Ronay&quot;, NA, &quot;Joana Cunha; Jairo Marques&quot;, &quot;Marcelo Viana&quot;, NA)

# Numero de caracteres
caracteres &lt;- c(5873, 6301, 358, 3644, 4086, 3454)

# Conteudo sobre politica
politica &lt;- c(1, 0, 0, 0, 0, 0)

# Conteudo sobre esporte
esporte &lt;- c(0, 1, 0, 0, 0, 0)

# Contem video
video &lt;- c(FALSE, FALSE, TRUE, FALSE, FALSE, TRUE)
</code></pre>

<p>Para onde vão os objetos de R criados? Para o workspace. Se quisermos uma fotografia do nosso workspace, usamos a função <em>ls</em>, com parêntese vazio (ou seja, sem argumentos além dos pré-estabelecidos):</p>

<pre><code class="language-r">ls()
</code></pre>

<h2 id="detalhes-importantes-nos-vetores-acima">Detalhes importantes nos vetores acima</h2>

<p>Mais alguns detalhes importantes a serem notados no exemplo acima:</p>

<ul>
<li>O formato da data foi arbitrariamente escolhido. Por enquanto, o R entende apenas como texto o que foi inserido. Datas são especialmente chatas de se trabalhar e há funções específicas para tanto.</li>
<li>Os textos foram inseridos entre aspas. Os números, não. Se números forem inseridos com aspas o R os entenderá como texto também.</li>
<li>Além de textos e números, temos no vetor <em>vídeo</em> valores lógicos, TRUE e FALSE. <em>logical</em> é um tipo de dado do R (e é particularmente importante).</li>
<li>O texto do primeiro título que coletei contém aspas. Como colocar aspas dentro de aspas sem fazer confusão? Se você delimitou o texto com aspas duplas, use aspas simples no texto e vice-versa.</li>
<li>O que são os <em>NA</em> no meio do vetor <em>autor</em>? Quando coletei as notícias, não consegui identificar o autor(a) de algumas (eram notícias da redação). <em>NA</em> é o símbolo do R para <strong>missing values</strong> e lidar com eles é uma das grandes chatices em R.</li>
</ul>

<h2 id="criando-um-data-frame-com-vetores">Criando um data frame com vetores:</h2>

<p>Como vimos acima, <em>data frames</em> são um conjunto de vetores na vertical. Se você introduziu os valores em cada vetor na ordem correta de coleta dos dados, então eles podem ser <strong>pareados</strong> e <strong>combinados</strong>. No meu exemplo, a primeira posição de cada vetor contém as informações sobre a primeira notícia, a segunda posição sobre a segunda notícia e assim por diante.</p>

<p>Obviamente, se estiverem pareados, os vetores devem ter o mesmo comprimento. Há uma função bastante útil para checar o comprimento:</p>

<pre><code class="language-r">length(jornal)
</code></pre>

<p>Vamos criar com os vetores que construímos um <em>data frame</em> com o nome <em>dados</em>. Vamos produzí-lo, discutir a função <em>data.frame</em> e depois examiná-lo:</p>

<pre><code class="language-r">dados &lt;- data.frame(jornal, date, titulo, autor, caracteres, politica, esporte, video)
</code></pre>

<p>A função <em>data.frame</em> cria um <em>data frame</em> a partir de vetores ou matrizes (que ainda não vimos). Quando criamos a partir de vetores, automaticamente os nomes das variáveis (colunas) no novo objeto serão os nomes dos vetores. Mas poderíamos querer nomes novos (por exemplo, em inglês). Bastaria fazer:</p>

<pre><code class="language-r">dados &lt;- data.frame(newspaper = jornal, 
                    date = date, 
                    title = titulo, 
                    author = autor, 
                    n_char = caracteres, 
                    politica, 
                    esporte, 
                    video)
</code></pre>

<p>Usando as funções que aprendemos nessa aula:</p>

<pre><code class="language-r"># 6 primeiras (e unicas, no caso) linhas
head(dados)

# Estrutura do data frame
str(dados)

# Nome das variaveis
names(dados)

# Dimensoes do data frame
dim(dados)
</code></pre>

<h2 id="tipos-de-dados-em-r-e-vetores">Tipos de dados em R e vetores</h2>

<p>Usando o que aprendemos sobre vetores, vamos examinar com cuidado os tipos de dados que podem ser armazenados em vetores:</p>

<p><strong>doubles</strong>, <strong>integers</strong>, <strong>characters</strong>, <strong>logicals</strong>, <strong>complex</strong>, e <strong>raw</strong>. Neste tutorial, vamos examinar os 3 mais comumente usados na análise de dados: <em>doubles</em>, <em>characters</em>, <em>logicals</em>.</p>

<h3 id="doubles">Doubles</h3>

<p><em>doubles</em> são utilizados para guardar números. Por exemplo, o vetor <em>caracteres</em>, que indica o número de caracteres em cada texto, é do tipo <em>double</em> (ops, desculpe por criar um vetor com este nome para números!). Vamos repetir o comando que cria este vetor:</p>

<pre><code class="language-r">caracteres &lt;- c(5873, 6301, 358, 3644, 4086, 3454)
</code></pre>

<p>Com a função <em>typeof</em> você consegue descobrir o tipo de cada vetor:</p>

<pre><code class="language-r">typeof(caracteres)
</code></pre>

<p>É possível fazer operações com vetores númericos (<em>integers</em> também são vetores numéricos, mas vamos esquecer deles por um segundo e fazer <em>double</em> sinônimo de numérico). Por exemplo, podemos somar 1 a todos os seus elementos, dobrar o valor de cada elemento ou somar todos:</p>

<pre><code class="language-r">caracteres + 1
caracteres * 2
sum(caracteres)
</code></pre>

<p>Note que as duas primeiras funções retornam vetores de tamanho igual ao original, enquanto a aplicação da função <em>sum</em> a um vetor retorna apenas um número, ou melhor, um <strong>vetor atômico</strong> (que contém um único elemento). Tal como aplicamos as operações matemáticas e a função <em>sum</em>, podemos aplicar diversas outras operações matemáticas e funções que descrevem de forma sintética os dados (média, desvio padrão, etc) a vetores numéricos. Veremos operações e funções com calma num futuro breve.</p>

<h3 id="logicals">Logicals</h3>

<p>Os vetores <em>politica</em> e <em>esporte</em> também são do tipo <em>double</em>. Mesmo registrando apenas a presença e ausência de uma característica, os valores inseridos são números. Mas e o vetor <em>video</em>? Vejamos:</p>

<pre><code class="language-r">typeof(politica)
typeof(esporte)
typeof(video)
</code></pre>

<p>Em vez de armazenarmos a sim/não, presença/ausência, etc com os números 0 e 1, podemos em R usar o tipo <em>logical</em>, cujos valores são TRUE e FALSE (ou T e F maiúsculos, para poupar tempo e dígitos). Diversas operações e resultados no R usam vetores lógicos (por exemplo, &ldquo;filtrar uma base dados&rdquo;) e os utilizaremos com frequência.</p>

<p>O que acontece se fizermos operações matemáticas com vetores lógicos?</p>

<pre><code class="language-r">video + 1
sum(video)
</code></pre>

<p>Automaticamente, o R transforma FALSE em 0 e TRUE em 1. Por exemplo, ao somar 4 FALSE e 2 TRUE obtemos o valor 2, que é o total de notícias que contêm vídeos.</p>

<h3 id="character">Character</h3>

<p>Finalmente, vetores que contêm texto são do tipo <em>character</em>. O nome dos jornais, data, título e autor são informações que foram inseridas como texto (lembre-se, o R não sabe por enquanto que no vetor <em>date</em> há uma data). Operações matemáticas não valem pare estes vetores.</p>

<p>Podemos extrair informações desse tipo de dado por meio do <em>regex</em> (<em>regular expressions</em>), mas isso é assunto para outra aula. Apenas tenham isso em mente.</p>

<h2 id="tipo-e-classe">Tipo e classe</h2>

<p>Veremos em momento oportuno que os objetos em R também tem um atributo denominado <strong>class</strong>. A classe diz respeito às características dos objetos enquanto tipo diz respeito ao tipo de dado armazenado. No futuro ignoraremos o tipo e daremos mais atenção à classe, mas é sempre bom saber distinguir os tipos de dados que podemos inserir na memória do computador usando R.</p>

<h2 id="abrindo-dados-de-fontes-externas">Abrindo dados de fontes externas</h2>

<p>R é uma linguagem extremamente flexível quanto ao formato de dados que podem ser importados. Comumente, utilizaremos dados provenientes de arquivos de texto (.txt, .csv, .tab, etc) ou de arquivos de excel transformados em arquivos de texto. Mas estas estão longe de serem as únicas possibilidades.</p>

<p>Com o pacote <em>haben</em> abriremos arquivos produzidos por outros softwares &ndash; como Stata e SPSS. Podemos também conectar o R a sistemas de gerenciamento de bancos de dados relacionais, como o SQL Server. Finalmente, podemos receber via web arquivos em formato XML ou Json e transformá-los em <em>data frames</em> em poucos passos.</p>

<p>Vamos começar com o exemplo simples. Baixe os dados com resultados eleitorais (votação nominal por município e zona) do Acre em 2014 disponíveis <a href="https://raw.githubusercontent.com/ngiachetta/ProgCienciasSociais/master/data/votacao_candidato_munzona_2014_AC.txt">aqui</a> (clique em &ldquo;Save link as&rdquo; e faça o download o vá <a href="https://github.com/ngiachetta/ProgCienciasSociais/blob/master/data/votacao_candidato_munzona_2014_AC.txt">aqui</a> e clique em download).</p>

<p>Estes dados são provenientes do <a href="http://www.tse.jus.br/eleicoes/estatisticas/repositorio-de-dados-eleitorais">Repositório de Dados Eleitorais</a> do TSE. O Tribunal disponibiliza para cada ano eleitoral arquivos por UF em formato de texto (.txt) e numa pasta comprimida em formato .zip.</p>

<p>Obs: se você tiver algum problema com o download, encoding, ou outro, pode ir direto ao Repositório e fazer o download de lá. Quando aprendermos algo de github esse problema deixará de existir.</p>

<p>Diferentemente de outros softwares, no R a &ldquo;interface Windows&rdquo;, aka &ldquo;menus e janelas&rdquo;, não oferece a possibilidade executar funções. Porém, na aba <em>environment</em> há um botão muito útil chamado &ldquo;Import Dataset&rdquo;, que serve para importar para o <em>workspace</em> arquivos em qualquer formato de texto (&ldquo;From CSV&rdquo;), MS Excel, Stata, SAS e SPSS.</p>

<p>Use o botão e a janela para chegar ao arquivo e abrí-lo.</p>

<p>Observe duas mudanças na sua tela. Agora você encontrará o objeto <em>votacao_candidato_munzona_2014_AC</em> na aba <em>Environment</em> e o comando de importação dos dados no console, seguido do comando <em>View</em> que provocou a abertura dos dados no RStudio.</p>

<p>Um detalhe importante: agora temos dois <em>data frames</em> (<em>dados</em> e <em>votacao_candidato_munzona_2014_AC</em> ) em nosso <em>workspace</em> convivendo com os vetores que criamos. Veja:</p>

<pre><code class="language-r">ls()
</code></pre>

<p>Em outros softwares, como Stata e SPSS, costumamos trabalhar com um único objeto, que é o banco de dados. Apenas um <em>data frame</em> por vez vai para a memória do software. No R, entretanto, temos um &ldquo;espaço&rdquo; no qual vários objetos coexistem.</p>

<p>Veja que não precisamos usar o botão de importação do RStudio para abrir o arquivo de dados. Podemos escrever a função <em>read.table</em> e todos os seus argumentos. Repetindo o comando:</p>

<pre><code class="language-r"># OBS 1: insira o endereco do arquivo no computador que estiver 
# utilizando no lugar do endereco de arquivo abaixo
#
# OBS 2: Windows e R tem um problema serio relacionados as barras nos enderecos.
# Tente usar \\ (duas barras invertidas) no lugar de uma barra
# Alternativamente, copie o endereco usado pelo RStudio via botao de importacao
votacao_candidato_munzona_2014_AC &lt;- read.table(
  &quot;c:/Users/fcslab122/Downloads/votacao_candidato_munzona_2014_AC.txt&quot;, 
  sep = &quot;;&quot;, fileEncoding=&quot;latin1&quot;)
</code></pre>

<p>No curso, vamos evitar usar o botão. Ao sair do curso, use-o sem problemas. Mas, como estamos em treinamento, precisamos dominar bem a função <em>read table</em> e seus argumentos.</p>

<p>Os mais importantes são os três primeiros, <em>file</em>, <em>header</em> e <em>sep</em>. O primeiro deles, <em>file</em> é obviamente o endereço do arquivo de dados. <em>header</em>, que recebe valores lógicos, indica se a primeira linha contém os nomes das variáveis (T) ou é a primeira linha dos dados (F). <em>sep</em> indica qual é o símbolo utilizado para separar as colunas em uma linha (por exemplo, o TSE costuma usar ponto-e-vígula &ndash; além deste, vírgula e tab são separadores bastante encontrados em arquivos de texto).</p>

<p>Alguns outros argumentos da função <em>read.table</em> a se notar: <em>dec</em> indica qual é o separador de decimais (ponto ou vírgula); <em>quote</em>, se os dados em cada &ldquo;célula&rdquo; estão contidos entre aspas; <em>stringsAsFactors</em> indica se textos devem ser vistos como textos ou variáveis categóricas (<strong>factors</strong>, que é uma classe de objetos que veremos em breve); e <em>fileEncoding</em>, que indica qual <em>encoding</em>, ou seja, qual forma de codificar bites em texto e números, foi usado ao salvar o arquivo (este é argumento particularmente importante para evitar bagunça de caracteres quando trocamos arquivos entre diferentes sistemas operacionais &ndash; IOS, Linux e Windows).</p>

<h2 id="breve-exerício">Breve exerício:</h2>

<p>1- Quantas linhas e quantas colunas têm o <em>data frame</em> <em>votacao_candidato_munzona_2014_AC</em>? Use as funções que você aprendeu no tutorial.</p>

<p>2- Observe as 4 primeiras linhas do <em>data frame</em> com o comando <em>head</em> (só as 4 primeiras).</p>

<p>3- Use o comando <em>str</em> para examinar o <em>data frame</em>.</p>

<h2 id="cadê-os-nomes-das-variáveis">Cadê os nomes das variáveis?</h2>

<p>Nem sempre teremos os nomes das variáveis na primeira linha do arquivo (e por isso utilizamos <em>header</em> = F). Quando isso ocorre o R preenche automaticamente os nomes com V1, V2, &hellip;, Vn, onde n é o total de colunas. Veja:</p>

<pre><code class="language-r">names(votacao_candidato_munzona_2014_AC)
</code></pre>

<p>Onde obter essa informação? No caso do TSE, no arquivo LEIAME. Em geral, precisamos de um arquivo que acompanhe o arquivo de dados para compreender a base de dados. Ou teremos que advinhar.</p>

<p>No próximo tutorial aprenderemos a transformar o <em>data frame</em> e alterar os nomes das variáveis.</p>

<h2 id="colunas-como-vetores">Colunas como vetores</h2>

<p>Uma vez que importamos os dados, podemos trabalhar com as colunas do <em>data frame</em> como se fossem vetores. Por exemplo, vamos tirar a média (com a função <em>mean</em>) da coluna V29, que é a coluna &ldquo;votos&rdquo; &ndash; no caso, de cada candidato em cada zona eleitoral. Veja:</p>

<pre><code class="language-r, error=TRUE">mean(X29)
</code></pre>

<p>Opa! O vetor X29 não foi encontrado! Isso ocorre porque V29 não é um objeto no nosso <em>workspace</em>. Como podemos ter mais de um <em>data frame</em>, se houvesse dois <em>data frames</em> com variáveis com nome V29 haveria confusão. O vetor com o qual queremos trabalhar está dentro do objeto <em>votacao_candidato_munzona_2014_AC</em>. Indicamos sua localização colocando primeiro o nome do <em>data frame</em>, seguido do símbolo $ e depois do nome da coluna:</p>

<pre><code class="language-r, error=TRUE">mean(votacao_candidato_munzona_2014_AC$X29)
</code></pre>

<h2 id="paramos-por-aqui">Paramos por aqui</h2>

<p>Fizemos neste tutorial uma rápida introdução a vetores e <em>data frames</em>. Vamos agora dar inúmeros passos para trás e aprender os fundamentos da linguagem R nos próximos tutoriais. De um forma ou de outra, tenha certeza de que você já começou a se acostumar com a linguagem, sua sintaxe, léxico e peculiaridades.</p>


			<aside class="copyright" role="note">
				
				&copy; 2018 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="../tutorial4/" title="Abrindo Dados no R">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Abrindo Dados no R
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="../tutorial3/" title="Condicionais, loops e funções">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Condicionais, loops e funções
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '\/';
      var repo_id  = 'R4CS\/site';
    
    </script>

    <script src="../javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

