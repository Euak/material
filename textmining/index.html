<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="pt-br">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Aula Text Mining - P4H  - Material</title>
    <meta name="generator" content="Hugo 0.22" />

    
    <meta name="description" content="Material do Curso de Programação para Ciências Sociais">
    
    <link rel="canonical" href="../textmining/">
    
    <meta name="author" content="P4H">
    

    <meta property="og:url" content="/textmining/">
    <meta property="og:title" content="P4H  - Material">
    <meta property="og:image" content="/logo_r4sc.jpg">
    <meta name="apple-mobile-web-app-title" content="P4H  - Material">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../stylesheets/icons.css">
    <link rel="stylesheet" href="../stylesheets/application.css">
    <link rel="stylesheet" href="../stylesheets/temporary.css">
    <link rel="stylesheet" href="../stylesheets/palettes.css">
    <link rel="stylesheet" href="../stylesheets/prism.css">

    <link rel="stylesheet" href="../stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="../javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Aula Text Mining
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/p4hUSP" title="@p4hUSP on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="../" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../logo_r4sc.jpg">
        </div>
      
      <div class="name">
        <strong>P4H  - Material </strong>
        
          <br>
          R4CS/site
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/R4CS/site/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/R4CS/site/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Introdução" href="../intro/">
	
	Introdução
</a>



  
</li>



<li>
  
    



<a  title="Gráficos" href="../ggplot2/">
	
	Gráficos
</a>



  
</li>



<li>
  
    



<a  title="Dplyr" href="../dplyr/">
	
	Dplyr
</a>



  
</li>



<li>
  
    



<a  title="Wrap Up" href="../wrapup/">
	
	Wrap Up
</a>



  
</li>



<li>
  
    



<a  title="Mapas" href="../mapas/">
	
	Mapas
</a>



  
</li>



<li>
  
    



<a  title="Web Scraping" href="../webscraping/">
	
	Web Scraping
</a>



  
</li>



<li>
  
    



<a  title="SQL" href="../sql/">
	
	SQL
</a>



  
</li>



<li>
  
    



<a class="current" title="Text Mining" href="../textmining/">
	
	Text Mining
</a>


<ul id="scrollspy">
</ul>


  
</li>


        </ul>
        

        
        <hr>
        <span class="section">Contatos</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/p4hUSP" target="_blank" title="@p4hUSP no GitHub">
              @p4hUSP no GitHub
            </a>
          </li>
          

          
          <li>
            <a href="https://facebook.com/p4hUSP" target="_blank" title="@p4hUSP on Facebook">
              @p4hUSP no Facebook
            </a>
          </li>
          

          
          <li>
            <a href="https://p4husp.herokuapp.com" target="_blank" title="@p4hUSP on Slack">
              @p4hUSP on Slack
            </a>
          </li>
          

          
          <li>
            <a href="mailto:programacao.sociais@gmail.com" title="Nosso E-Email programacao.sociais@gmail.com">
              Envie um E-Mail
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Aula Text Mining </h1>

			

<h1 id="análise-de-texto-no-r">Análise de texto no R</h1>

<p>A quantidade de informações geradas atualmente são incríveis e consequentemente a forma como eles estão estruturados pode variar muito, entre elas, o casos dos textos.</p>

<p>Análise de texto não é algo relativamente novo, podemos notar isso em <em>papers</em> e livros sobre análise de discurso ou conteúdo. Ocorre que o poder computacional foi capaz de trazer análises ainda mais escaláveis do que se fazia antes e com uma força quantitativa muito mais robusta.</p>

<p>No <strong>R</strong> existem muitos pacotes para lidar com textos, que vão desde contar frequência de palavras até rodar modelos estatísticos. Vamos tentar percorrar estes tópicos utilizando como bases os discursos da Dilma e do Temer.</p>

<p>Estes discursos foram obtidos utilizando webscraping e seu código está disponível <a href="https://github.com/ngiachetta/OficinaCIS-USP/blob/master/WebScraping.Rmd">aqui</a>. Não recomedo baixá-los novamente, vai demorar uma eternidade!</p>

<h2 id="revisando-estrutura-de-dados-strings">Revisando estrutura de dados: strings</h2>

<p>Ao longo das aulas vimos como podemos guardar variáveis tipo texto no R. Estes objetos devem sempre estar entre aspas, sejam as aspas simples <code>''</code> ou duplas <code>&quot;&quot;</code>.</p>

<pre><code class="language-r">c(&quot;Oi&quot;, &quot;Tudo&quot;, &quot;bem&quot;)
</code></pre>

<p>Estes tipos de objetos podem ser manipulados assim como tantos outros objetos, porém não podemos, por exemplo, fazer a média de <code>c(&quot;Oi&quot;, &quot;Tchau&quot;)</code>. Uma das principais função para manipulação de texto no <strong>R</strong> é o <strong>stringr</strong> criado por Hadley Wickham. Vamos ver como ele funciona!</p>

<h2 id="stringr"><strong>stringr</strong></h2>

<p>A maior parte das funções do <strong>stringr</strong> tem como prefixo <code>str_</code>, como por exemplo, <code>str_replace()</code>, <code>str_detect()</code> ou <code>str_extract()</code> e para habilitar ela para uso fazemos,</p>

<pre><code class="language-r"># install.packages(&quot;stringr&quot;)
library(stringr)
</code></pre>

<p>Vamos usar o seguinte vetor como exemplo:</p>

<pre><code class="language-r">textos &lt;- c(&quot;Programacao em R&quot;, &quot;Ciências Sociais&quot;, &quot;Sociologia&quot;, &quot;Programar é legal&quot;, &quot;HaDlEy WiCkHaM&quot;, &quot;R&quot;)
</code></pre>

<h3 id="str-lenght"><code>str_lenght()</code></h3>

<p>O <code>str_lenght()</code> serve para verificarmos o número de caracteres das palavras. Note que ele é diferente da função <code>length()</code> que apenas conta a quantidade de elementos no vetor.</p>

<pre><code class="language-r">str_length(textos)

length(textos)
</code></pre>

<h3 id="str-c"><code>str_c()</code></h3>

<p>O <code>str_c()</code> nos ajuda a concatenar as strings em uma única. Vamos ver um exemplo concatenando os elementos das posições um e dois do nosso vetor &ldquo;textos&rdquo;.</p>

<pre><code class="language-r">str_c(textos[1], textos[2], sep = &quot; para &quot;)
</code></pre>

<p>Basicamente, colamos &ldquo;Programacao em R&rdquo; e &ldquo;Ciências Sociais&rdquo; separado por &ldquo; para &ldquo;. Simples, não?</p>

<h3 id="str-to-lower-str-to-title-str-to-upper"><code>str_to_lower()</code>, <code>str_to_title()</code>, <code>str_to_upper()</code></h3>

<p>Estas funções são bem intuitivas, olha só:</p>

<pre><code class="language-r">str_to_lower(textos)
</code></pre>

<pre><code class="language-r">str_to_title(textos)
</code></pre>

<pre><code class="language-r">str_to_upper(textos)
</code></pre>

<h3 id="str-replace-e-str-replace-all"><code>str_replace()</code> e <code>str_replace_all()</code></h3>

<p>A função <code>str_replace()</code> e <code>str_replace_all()</code> localizam um padrão e o substituem por algo de seu interesse, por exemplo, queremos substituir todas as letras r dos elementos do nosso vetor por Python.</p>

<pre><code class="language-r">str_replace(textos, &quot;R&quot;, &quot;Python&quot;)
</code></pre>

<p>Ops, parece que o r em caixa baixa é diferente do R em caixa alta! Isso significa que estas funções são case-sensitive, ou seja, precisamos especificar que queremos transformar tanto &ldquo;r&rdquo; e &ldquo;R&rdquo; em Python.</p>

<pre><code class="language-r">mud_R &lt;- str_replace(textos, &quot;R&quot;, &quot;Python&quot;)
mud_r &lt;- str_replace(mud_R, &quot;r&quot;, &quot;Python&quot;)
mud_r
</code></pre>

<p>Parece que ainda não deu certo! O elemento &ldquo;PPythonogramar é legal&rdquo; ainda tem &ldquo;r&rdquo; que não foram substituídos. Para solucionar esse problema nós utilizamos <code>str_replace_all()</code> que vai substituir todos os padrões do texto.</p>

<pre><code class="language-r">mud_R &lt;- str_replace_all(textos, &quot;R&quot;, &quot;Python&quot;)
mud_r &lt;- str_replace_all(mud_R, &quot;r&quot;, &quot;Python&quot;)
mud_r
</code></pre>

<h3 id="str-detect"><code>str_detect()</code></h3>

<p>O <code>str_detect()</code> irá detectar se existe um padrão específico nos seus textos, como por exemplo, vamos detectar em quais elementos aparecem a palavra programar.</p>

<pre><code class="language-r">str_detect(textos, &quot;Programar&quot;)
</code></pre>

<h3 id="str-extract"><code>str_extract()</code></h3>

<p>O <code>str_extract()</code> extraí um padrão dos elementos do texto.</p>

<pre><code class="language-r">str_extract(textos, &quot;Programar&quot;)
</code></pre>

<h2 id="expressões-regulares-regex">Expressões Regulares (Regex)</h2>

<p>Existem formas de sinalizarmos alguns padrões nos textos, como por exemplo, falar que queremos o r em caixa baixa ou o R em caixa alta. Estas formas de sinalizar padrões são chamadas de expressões regulares. No wikipedia a definição de regex é a seguinte,</p>

<blockquote>
<p>&ldquo;uma forma concisa e flexível de identificar cadeias de caracteres de interesse, como caracteres particulares, palavras ou padrões de caracteres&rdquo;</p>
</blockquote>

<p>Dê uma pausa e leia o material do Curso R sobre expressões regulares: <a href="http://material.curso-r.com/stringr/#express%C3%B5es-regulares">http://material.curso-r.com/stringr/#express%C3%B5es-regulares</a></p>

<p>Agora que temos uma noção melhor sobre como manipular textos, vamos analisar os discursos da Dilma e Temer!</p>

<h2 id="análise-dos-discurso-da-dilma-e-temer">Análise dos discurso da Dilma e Temer</h2>

<p>Vamos habilitar os pacotes que utilizaremos e abrir os dados com os discursos.</p>

<p>Download <a href="https://github.com/R4CS/material/tree/master/tu.textmining/data">aqui</a>.</p>

<pre><code class="language-r">library(tidyverse)
library(lubridate)
library(quanteda)
library(wordcloud2)
library(stringr)
library(tidytext)
library(SnowballC)
</code></pre>

<pre><code class="language-r">discursos &lt;- read_csv(&quot;data/discursos.csv&quot;)
</code></pre>

<p>O banco de dados tem apenas 5 variáveis, com informações sobre a data, o título do discurso, o link para os discursos, quem os proferiu e o seu cunteúdo. Vamos começar fazendo algumas transoformações básicas.</p>

<pre><code class="language-r">glimpse(discursos)
</code></pre>

<p>A primeira transformação que faremos vai ser transformar a variável <code>date</code> em um objeto interpretado como data e não string, em seguida transformaremos todas as outras variáveis em caixa baixa para termos um padrão nos dados já que como dissemos, as funções para manipulação de texto são <em>case-sensitive</em>. Além disso, com a variável data padronizada de forma correta, vamos criar uma segunda variável para extrair apenas o ano do discurso. Por fim, criaremos uma variável que detecta se o discurso foi ou não proferido no palácio do planalto.</p>

<pre><code class="language-r">discursos &lt;- discursos %&gt;% 
  mutate(date = dmy_hm(date),
         title = str_to_lower(title),
         discourse = str_to_lower(discourse),
         year = year(date),
         palacio_planalto = str_detect(discourse, &quot;(^palácio do planalto)&quot;))
</code></pre>

<p>Uma primeira pergunta que podemos responder é: Quantos discursos foram proferidos pelos dois presidentes no Palácio do Planalto?</p>

<pre><code class="language-r">discursos %&gt;% 
  count(palacio_planalto, who) %&gt;% 
  spread(palacio_planalto, n)
</code></pre>

<p>Podemos notar que ambos presidentes costumam discursar fora do palácio do planalto! Isso é interessante rs.</p>

<p>Pois bem, vamos ao que interessa!</p>

<p>Para este tutorial, utilizaremos dois pacotes principais:</p>

<ul>
<li><p><code>quanteda</code></p></li>

<li><p><code>tidytext</code></p></li>
</ul>

<p>Apesar de não serem os pacotes mais <em>&ldquo;mainstream&rdquo;</em>, eles permitem fazer o que o pacote <code>tm</code> faz, análises mais robustas com o próprio pacote. Apesar disso, o conceito que percorre estas bibliotecas é muito semelhantes, sobretudo, no <code>quanteda</code>, temos três tipos básicos de objetos:</p>

<ol>
<li><p>Corpus</p></li>

<li><p>Tokens</p></li>

<li><p>Document-feature matrix (DFM)</p></li>
</ol>

<p>Falaremos melhor deles mais a diante, porém antes de avançarmos é bom termos na cabeça como funciona a preparação de um texto para a sua análise.</p>

<h3 id="preparação-do-texto">Preparação do texto</h3>

<p>A limpeza do texto, ou até mesmo chamada de &ldquo;pré-processamento&rdquo; é um conjunto de práticas voltadas para remover ou alterar partes dos textos que prejudicariam a análise final, como por exemplo, se o texto tiver muitas palavras &ldquo;tipo&rdquo;, ele vai influênciar na analise das outras palavras, mesmo que ela não tenha sentido nenhum para o que estamos tratando. Se você ainda não se convenceu, pare para pensar quando um colega vai apresentar um trabalho e fica falando &ldquo;tipo&rdquo; toda hora!</p>

<p>Podemos nos perguntar: Existe uma limpeza correta? Não! Tudo depende do interesse do pesquisador, como por exemplo, se você está trabalhando com valores em textos, talvez não seja interessante para você removê-los.</p>

<p>Porém, é bom saber que apesar de não ter uma limpeza melhor do que as outras, elas podem influênciar na análise de estatísticas mais robustas ou até mesmo a frequência das palavras. Se você ficou curiosa(o) para saber mais sobre isso acesse este artigo <a href="http://www.nyu.edu/projects/spirling/documents/preprocessing.pdf">aqui</a>.</p>

<p>Nós vamos seguir a limpeza proposta (ou pelo menos parecida) pelo artigo acima , inclundo uma limpeza número 0A e 0B, muito mais relacionada com as condições dos nossos dados. Dentre estas limpezas temos:</p>

<p>0A. Remover &ldquo;não discursos&rdquo;</p>

<p>0B. Filtrar apenas em casos dos quais a linguagem é português</p>

<ol>
<li><p>Pontuação</p></li>

<li><p>Números</p></li>

<li><p>Stemming</p></li>

<li><p>Remover Stopwords</p></li>
</ol>

<p>Algumas destas limpezas como a 0A e a 0B vão ser realizadas utilizando os próprios verbos do <code>dplyr</code> e do <code>stringr</code>. Para realização dos outros passos iremos introduzir os conceitos de objetos no <code>quanteda</code>.</p>

<h4 id="0a-remover-não-discursos">0A. Remover &ldquo;não discursos&rdquo;</h4>

<p>Prestem atenção no resultado do código abaixo,</p>

<pre><code class="language-r">discursos %&gt;% top_n(n = 5, discourse) %&gt;% select(discourse)
</code></pre>

<p>Muitos deles começam com uma localidade, seguidos de uma sequência de espaços para então chegar no discurso. Além disso, os textos se encerram com um texto escrito &ldquo;ouça na integra&hellip;&rdquo;. Estas coisas não fazem parte do texto, logo precisaremos removê-los!</p>

<p>Não se preocupe caso não entenda de primeira, &ldquo;regex&rdquo; é algo que pegamos o costume com o tempo!</p>

<p>Obs: Iremos aproveitar para remover frases como &ldquo;bom dia&rdquo;, &ldquo;boa tarde&rdquo; e &ldquo;boa noite&rdquo;</p>

<pre><code class="language-r">discursos &lt;- discursos %&gt;% mutate(discursos_limpos = str_replace_all(discourse, 
                                                                     &quot;(ouça a íntegra.*).*|\\n|(desenvolvido com o cms).*|(plone)|(bom dia)|(boa noite)|(boa tarde)&quot;, &quot;&quot;) %&gt;% str_trim())
discursos &lt;- discursos %&gt;% mutate(discursos_limpos = str_replace_all(discursos_limpos, &quot;.*[0-9]\\s{4,}&quot;, &quot;&quot;))
</code></pre>

<h4 id="0b-filtrar-apenas-em-casos-dos-quais-a-linguagem-é-português">0B. Filtrar apenas em casos dos quais a linguagem é português</h4>

<p>Alguns discursos na nossa base estão em inglês, o que dificulta a análise de texto. Para isso precisamos identificar os idiomas dos textos e assim, filtrar os casos em português. Existe um pacote para isso que chama <code>textcat</code>.</p>

<pre><code class="language-r">#install.packages(&quot;textcat&quot;)
library(textcat)
</code></pre>

<p>Após instalar, basta identificarmos o idioma utilizando a função <code>textcat()</code> e filtrar o nosso caso de interesse.</p>

<pre><code class="language-r">discursos &lt;- discursos %&gt;% 
  mutate(idioma = textcat(discursos_limpos)) %&gt;% 
  filter(idioma == &quot;portuguese&quot;)
</code></pre>

<h4 id="pausa-para-conceitos">Pausa para conceitos</h4>

<p>Como mencionamos acima, o quanteda tem três tipos de objetos.</p>

<pre><code class="language-r">knitr::include_graphics(&quot;img/fluxo_text_minging.png&quot;)
</code></pre>

<p>O primeiro deles, é o <strong>Corpus</strong>, que nada mais é do que uma coleção de documentos.</p>

<pre><code class="language-r">corpus &lt;- corpus(discursos$discourse)
</code></pre>

<p>Porém, lembre-se que estamos lidando tanto com discursos da Dilma quanto discursos do Temer, logo precisamos definir no nosso corpus qual discurso pertence a quem e em qual ano.</p>

<pre><code class="language-r">quem_ano &lt;- discursos %&gt;% select(who, year)
docvars(corpus, c(&quot;who&quot;, &quot;year&quot;)) &lt;- quem_ano

summary(corpus)
</code></pre>

<p>Agora que temos um corpus, podemos transformá-los em <strong>tokens</strong>, que de forma bem rude, são as palavras de cada documento. Vamos também aproveitar para fazer algumas limpezas no nosso corpus, que seriam a remoção da pontuação e dos números.</p>

<pre><code class="language-r">token &lt;- tokens(corpus, 
       include_docvars = T,
       remove_numbers = T, 
       remove_punct = T)

head(token, n = 2)
</code></pre>

<p>Aora que temos os tokens, remover as stopwords. Stemming nada mais é que um método para obter a raiz das palavras! Ele serve para que palavras com mesmo significado, ou significados diferentes sejam interpretadas como as mesmas, como por exemplo, livro e livreiro tem como raiz livr. Se procurarmos pela internet podemos ver a seguinte definição.</p>

<p>No caso das Stopwords está definição pode nos ajudar:</p>

<blockquote>
<p>Stop words (ou palavras de parada – tradução livre) são palavras que podem ser consideradas irrelevantes para o conjunto de resultados a ser exibido em uma busca realizada em uma search engine. Exemplos: as, e, os, de, para, com, sem, foi.</p>
</blockquote>

<p>Sendo assim, para realizar o stemming e retirar os stopwords utilizamos:</p>

<pre><code class="language-r">sw &lt;- stopwords(language = &quot;pt&quot;)
token &lt;- tokens_remove(token, c(sw, &quot;é&quot;))
token &lt;- tokens_wordstem(token, language = &quot;portuguese&quot;)
</code></pre>

<p>Vamos finalmente transformar nossos tokens em DFM (Document Feature Matrix), também chamado de DTM (Document-Term Matrix). o DFM é uma matriz em que as linhas são os documentos, que no nosso caso são os discursos, e as colunas são os termos (palavras), o valor contido dentro das células indicam o quão frequente os termos são nos documentos.</p>

<p>A tabela abaixo é um exemplo de um DFM:</p>

<table>
<thead>
<tr>
<th>&hellip;</th>
<th>casa</th>
<th>janela</th>
<th>porta</th>
</tr>
</thead>

<tbody>
<tr>
<td>Doc1</td>
<td>2</td>
<td>5</td>
<td>0</td>
</tr>

<tr>
<td>Doc2</td>
<td>4</td>
<td>0</td>
<td>0</td>
</tr>

<tr>
<td>Doc3</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>

<p>Dizemos que a matriz é esparsa quando ela possui uma grande quantidade de zeros e em algumas análises isso pode ser um problema!</p>

<pre><code class="language-r">dfm_discursos &lt;- dfm(token)

ndoc(dfm_discursos) # Numero de discursos
nfeat(dfm_discursos) # Numero de palavras
sparsity(dfm_discursos) # % da matriz esparsa (% de zeros)
</code></pre>

<p>Vamos finalmente para as análises</p>

<ul>
<li>Frequência das palavras</li>
</ul>

<pre><code class="language-r">freq &lt;- textstat_frequency(dfm_discursos, groups = docvars(dfm_discursos, &quot;who&quot;))
freq
</code></pre>

<pre><code class="language-r"># Grafico da dilma
freq %&gt;% 
  filter(group == &quot;Dilma&quot;) %&gt;% 
  arrange(desc(frequency)) %&gt;% 
  slice(1:20) %&gt;% 
ggplot(aes(x = reorder(feature, frequency), y = frequency)) +
    geom_point() + 
    coord_flip() +
    labs(x = NULL, y = &quot;Frequency&quot;)
</code></pre>

<pre><code class="language-r"># Grafico do Temer
freq %&gt;% 
  filter(group == &quot;Temer&quot;) %&gt;% 
  arrange(desc(frequency)) %&gt;% 
  slice(1:20) %&gt;% 
ggplot(aes(x = reorder(feature, frequency), y = frequency)) +
    geom_point() + 
    coord_flip() +
    labs(x = NULL, y = &quot;Frequency&quot;)
</code></pre>

<ul>
<li>Nuvem de palavras</li>
</ul>

<pre><code class="language-r"># Nuvem de palavra dos dois presidentes
wordcloud2(freq)
</code></pre>

<pre><code class="language-r"># Nuvem da dilma
freq %&gt;% 
  filter(group == &quot;Dilma&quot;) %&gt;% 
  arrange(desc(frequency)) %&gt;% 
  slice(1:200) %&gt;% 
  wordcloud2()
</code></pre>

<pre><code class="language-r"># Nuvem da Temer
freq %&gt;% 
  filter(group == &quot;Temer&quot;) %&gt;% 
  arrange(desc(frequency)) %&gt;% 
  slice(1:200) %&gt;% 
  wordcloud2()
</code></pre>

<p>Observe os parâmetros da função wordcloud2, podemos mudar uma infinidade de coisas como por exemplo a cor de fundo e o tamanho da fonte</p>

<pre><code class="language-r"># Nuvem da Temer
freq %&gt;% 
  filter(group == &quot;Temer&quot;) %&gt;% 
  arrange(desc(frequency)) %&gt;% 
  slice(1:200) %&gt;% 
  wordcloud2(backgroundColor = &quot;gray&quot;, size = 0.3)
</code></pre>


			<aside class="copyright" role="note">
				
				&copy; 2019 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="../dplyr/" title="Aula 3">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Aula 3
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="../tyverse/aula-3/" title="Dplyr">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Dplyr
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '\/';
      var repo_id  = 'R4CS\/site';
    
    </script>

    <script src="../javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-119683862-1', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="../javascripts/prism.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

